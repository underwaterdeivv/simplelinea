const loginPath="/account/login",registerPath="/account/register",RECAPTCHA_PARAM_KEY="recaptcha-v3-token",HCAPTCHA_PARAM_KEY="h-captcha-response",ssw_is_auth_page=location.pathname.indexOf("/account")>-1,ssw_message_selector=ssw_is_auth_page?'form[action*="/account"]:not(#he_customer_login, #he_create_customer)':"#login_modal .login-failed";if(window.storeFrontRecaptchaV3ScriptUrl="https://cdn.shopify.com/shopifycloud/storefront-recaptcha-v3/v0.6/index.js",window.showLoginPopupLoader=function(){ssw(".ssw-login form").css("opacity","0.3"),ssw(".ssw-login form input").removeAttr("enabled").attr("disabled","disabled"),ssw(".ssw-signup-loading").show(),ssw(".he-login").css("opacity","0.3"),ssw(".he-login input").removeAttr("enabled").attr("disabled","disabled"),ssw(".ssw-login-loading").show()},window.hideLoginPopupLoader=function(){ssw(".ssw-login form").css("opacity","1"),ssw(".ssw-login form input").removeAttr("disabled").attr("enabled","enabled"),ssw(".ssw-signup-loading").hide(),ssw(".he-login").css("opacity","1"),ssw(".he-login input").removeAttr("disabled").attr("enabled","enabled"),ssw(".ssw-login-loading").hide()},window.targetSEMModal=function(e,s){var o,t="";if(e.first_name&&(t+=e.first_name+" "),e.last_name&&(t+=e.last_name),"invited"===e.state)ssw("#sem_btn").hide(),ssw("#sem_forgot").hide(),ssw("#sem_password").hide(),o=sswLangs.t("already_registered_and_sent_invite_message",{email:e.email,service_name:s});else if("enabled"!=e.state)ssw("#sem_btn").hide(),ssw("#sem_forgot").hide(),e.account_activation_token&&e.email?(o=sswLangs.t("already_registered_to_social_service",{email:e.email,service_name:s}),ssw("#sem_modal_form").data("account-activation",{customer_id:e.customer_id,token:e.account_activation_token})):(ssw("#sem_password").hide(),o=sswLangs.t("incorrect_credentials",[e.email,s]));else{if(window.ssw.usercheckResponse.multipass_enabled,window.ssw.usercheckResponse.multipass_enabled)return void(new ShopifyLogin).multiPassLogin();o=sswLangs.t("already_registered_to_social_service",{email:e.email,service_name:s})}if(hideLoginPopupLoader(),ssw("#social_exist_modal .ssw-img-circle").hasClass("ssw-hide")||ssw("#social_exist_modal .ssw-img-circle").addClass("ssw-hide"),e.photo_url){var a=new Image;a.onload=function(){ssw("#social_exist_modal .ssw-img-circle").removeClass("ssw-hide"),ssw("#social_exist_modal .ssw-img-circle").attr("src",e.photo_url)},a.src=e.photo_url}ssw("#sem_name").html(t),ssw("#sem_email").val(e.email),ssw("#sem_text").html(o),ssw("#login_modal").sswModal("hide"),ssw("#social_exist_modal").sswModal()},void 0===sswApp.customer){var service_id=0,sl=0,sswSocialLogin=0;function focusOnHiddenField(){document.querySelector(".hiddenFocusFieldRecaptcha")&&document.querySelector(".hiddenFocusFieldRecaptcha").focus(),document.querySelector(".grecaptcha-badge")&&(document.querySelector(".grecaptcha-badge").style.visibility="visible")}function triggerCaptchaLoad(){const e=document.createElement("form");e.className="hiddenFormRecaptcha",e.action="/account/login";const s=document.createElement("input");s.type="hidden",s.name="form_type",s.value="customer_login";const o=document.createElement("input");o.type="text",o.name="email",o.className="hiddenFocusFieldRecaptcha",o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",e.appendChild(s),e.appendChild(o),document.body.appendChild(e)}ssw(document).on("show.ssw.modal","#signup_modal",focusOnHiddenField),ssw(document).on("show.ssw.modal","#login_modal",focusOnHiddenField),ssw(document).on("hide.ssw.modal",(()=>{document.querySelector(".grecaptcha-badge")&&(document.querySelector(".grecaptcha-badge").style.visibility="hidden")})),ssw(document.body).on("mouseenter",".ssw-social-login-widget",focusOnHiddenField),document.querySelector(".hiddenFocusFieldRecaptcha")||triggerCaptchaLoad(),location.pathname.includes("account")&&focusOnHiddenField(),window.sswCreateAccount=function(){var e=ssw("#accept-terms-modal").data("own-app");if(ssw("#ssw-create-account-button").attr("disabled","disabled"),ssw("#ssw-create-account-button").siblings("#ssw-cancel-account-button").attr("disabled","disabled"),!e)return ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/acceptTerms",data:{_sid:ssw.cookie("hesid"),service_id:ssw("#ssw-accept-terms-service_id").val(),accepts_marketing:ssw("#ssw-accept-marketing-checkbox")[0].checked,accept_terms:ssw("#ssw-accept-terms-checkbox")[0].checked,email:ssw("#terms-email-input").val()},success:function(e){switch(e.error){case 0:var s=new ShopifyLogin;s.preLogin(e.email,e.password),s.login({verified:e.verified});break;case 1:if(e.user){var o=[];e.user.twitter||o.push(".ssw-twconnect"),e.user.tumblr||o.push(".ssw-tmconnect"),e.user.instagram||o.push(".ssw-inconnect");var t=ssw("#login_modal");t.find(o.join()).hide(),t.sswModal("show"),addMessage(ssw_message_selector,sswLangs.t("this_email_is_already_used"),"info")}}},dataType:"json"}),!1;(new ShopifyLogin).setServiceUser(e.user,e.service)},window.sswCancelAccount=function(){ssw("#accept-terms-modal").sswModal("hide"),hideLoginPopupLoader()},window.sswOnAcceptTerms=function(e){"accept_terms"===e.name?e.checked?(ssw("#ssw-cancel-account-button").hide(),ssw("#ssw-create-account-button").show()):(ssw("#ssw-cancel-account-button").show(),ssw("#ssw-create-account-button").hide()):"terms"===e.name&&(e.checked?(ssw("#hesy-sign-up-cancel").hide(),ssw("#hesy-sign-up-submit").show()):(ssw("#hesy-sign-up-cancel").show(),ssw("#hesy-sign-up-submit").hide()))},window.sswOnAcceptMarketing=function(e){"accepts_marketing"===e.name&&(e.checked?ssw("#ssw-customer-accepts_marketing").val(!0):ssw("#ssw-customer-accepts_marketing").val(!1))},window.sswOnAcceptMarketingRegisterPage=function(e){"accepts_marketing"==e.name&&(e.checked?ssw(".ssw-accept-marketing__input_hidden").val(!0):ssw(".ssw-accept-marketing__input_hidden").val(!1))},window.showAcceptTermsForm=function(e,s,o){s?(ssw("#accept-terms-modal").data("own-app",{user:o,service:s}),ssw(".terms-email-group").hide()):ssw("#accept-terms-modal").removeData("own-app"),ssw("#signup_modal").sswModal("hide"),ssw("#login_modal").sswModal("hide"),e.service_id&&ssw("#ssw-accept-terms-service_id").val(e.service_id),e.email&&(ssw("#terms-email-input").val(e.email),ssw(".terms-email-group").hide()),e.termsLink&&(ssw("#accept-terms-modal .terms-link").attr("href",e.termsLink).show(),ssw("#accept-terms-modal .terms-span").hide()),e.termsSignup||(ssw(".accept_terms-group").hide(),ssw("#ssw-create-account-button").show(),ssw("#accept-terms-modal .ssw-h3").text(sswLangs.t("accept_terms_and_conditions"))),hideLoginPopupLoader(),ssw("#accept-terms-modal").sswModal()},window.addEventListener("sswoauthcallback",(function(e){if(e.detail&&-1!==["twitter","tumblr","instagram"].indexOf(e.detail.service)){var s=e.detail.service;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/shopCallback",dataType:"json",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token"),service:s},success:function(e){var o;sswSocialLogin=1,void 0!==e.service_id&&(service_id=e.service_id),void 0!==e.password&&e.password&&(e.password=atob(e.password)),ssw.isEmptyObject(e)?hideLoginPopupLoader():e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new?showAcceptTermsForm(e):e.password?e.isOldCustomer?targetSEMModal(e,s):((o=new ShopifyLogin).preLogin(e.email,e.password),o.login({verified:e.verified})):void 0!==e.user_id&&e.user_id&&(window.ssw.usercheckResponse.multipass_enabled,1)&&window.ssw.usercheckResponse.multipass_enabled?(o=new ShopifyLogin).multiPassLogin():(hideLoginPopupLoader(),ssw("#service_id").val(e.service_id),ssw(".ssw-modal").sswModal("hide"),e.email?targetSEMModal(e,s):ssw("#set-email-modal").sswModal())}})}})),window.shopCallback4TTI=function(e,s){showLoginPopupLoader();var o=sswProxyUrl+"/lite2/auth/"+e+"?_sid="+ssw.cookie("hesid")+"&verify_token="+ssw.cookie("ssw_verify_token")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(o+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=o):ssw.oauthpopup({path:o,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:s},bubbles:!0,cancellable:!1})}})},window.loginLoader=function(){ssw(".ssw-modal").sswModal("hide"),ssw("body").prepend('<div style="background: none repeat scroll 0 0 rgba(255, 255, 255, 0.77);height: 100%;position: fixed;width: 100%;z-index: 999;"><div class="ssw-login-loading" id="ssw-login-loader"> <span class="ssw-spin ssw-loader"></span> </div> </div>'),ssw("#ssw-login-loader").css("opacity",1),ssw("#ssw-login-loader").css({position:"fixed",top:"50%",left:"50%"})},window.loginLoaderCancel=function(){ssw("#ssw-login-loader").parent().remove()},window.addMessage2SetMailForm=function(e){var s=ssw("#set-email-error");s.html(e),s.show()};var addMessage=function(e,s,o){o=void 0!==o?"ssw-alert-"+o:"",ssw(e).prepend('<div class="ssw-alert '+o+' ssw-fade ssw-in"><button class="ssw-close" data-dismiss="ssw-alert">&times;</button>'+s+"</div>")};function getTmpFaves(){let e=localStorage.getItem("ssw-tmp-faves");return e&&(e=JSON.parse(e)),e}window.validateLogin=function(){Promise.all([Ssw.gwAssetsManifestLoader.requireByKey("lib.popover.js","SCRIPT"),Ssw.gwAssetsManifestLoader.requireByKey("lib.validate.js","SCRIPT")]).then((function(){let e=ssw("#sem_modal_form");e.validate({rules:{password:{required:!0}},highlight:function(e){ssw(e).closest(".ssw-control-group").addClass("ssw-error")},success:function(e){ssw(e).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){var s=new ShopifyLogin,o=ssw("#sem_email").val(),t=ssw("#sem_password").val();ssw.cookie("ssw_verify_token",sswMd5(t+btoa(o)),{expires:30,path:"/",secure:"https:"===location.protocol,samesite:Shopify.designMode?"None":"Lax"}),s.preLogin(o,t);var a=e.data("account-activation");"object"==typeof a?(a.customer={password:t,password_confirmation:t},s.login(a),e.data("account-activation",!1)):s.login()}}),ssw("#set-email-form").validate({rules:{email:{required:!0,email:!0}},highlight:function(e){ssw(e).closest(".ssw-control-group").addClass("ssw-error")},success:function(e){ssw(e).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/setEmail",data:{_sid:ssw.cookie("hesid"),verify_token:ssw.cookie("ssw_verify_token"),service_id:ssw("#service_id").val(),email:ssw("#set-email-input").val()},success:function(e){switch(e.error){case 0:var s=new ShopifyLogin;s.preLogin(e.email,e.password),s.login({verified:e.verified});break;case 1:if(e.user){var o=[];e.user.twitter||o.push(".ssw-twconnect"),e.user.tumblr||o.push(".ssw-tmconnect"),e.user.instagram||o.push(".ssw-inconnect");var t=ssw("#login_modal");t.find(o.join()).hide(),t.sswModal("show"),addMessage(ssw_message_selector,sswLangs.t("this_email_is_already_used"),"info")}break;case 2:addMessage2SetMailForm(sswLangs.t("incorrect_data"));break;case 3:addMessage2SetMailForm(sswLangs.t("tumblr_user_not_found"));break;case 4:addMessage2SetMailForm(sswLangs.t("not_created_customer_on_shopify"));break;case 5:addMessage2SetMailForm(sswLangs.t("problem_on_create_user"))}},dataType:"json"})}}),ssw("#he_create_customer").validate({rules:{email:{required:!0,email:!0}},highlight:function(e){ssw(e).closest(".ssw-control-group").addClass("ssw-error")},success:function(e){ssw(e).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){(new ShopifyLogin).signUp()}}),ssw("#he_customer_login").validate({rules:{"customer[email]":{required:!0,email:!0},"customer[password]":{required:!0,minlength:1}},highlight:function(e){ssw(e).closest(".ssw-control-group").addClass("ssw-error")},success:function(e){ssw(e).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){(new ShopifyLogin).login()}})}))},window.serviceUserChecker=function(e,s){FB.api("/me",{fields:"id,email"},(function(o){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/service",data:{_sid:ssw.cookie("hesid"),user_id:e.authResponse.userID,email:o.email,service:s,access_token:e.authResponse.accessToken,hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(o){var t=new ShopifyLogin;void 0!==o.service_id&&(service_id=o.service_id),o.status?o.password&&o.email?(sswSocialLogin=1,sl=1,t.preLogin(o.email,o.password),o.account_activation_token?t.login({customer_id:o.customer_id,token:o.account_activation_token,verified:o.verified,service:s,customer:{password:o.password,password_confirmation:o.password}}):t.login({verified:o.verified,service:s})):targetSEMModal(o,"facebook"):o.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==o.new&&1===o.new?showAcceptTermsForm(o,"facebook",e):o.isOldCustomer?targetSEMModal(o,"facebook"):t.setServiceUser(e,"facebook")},dataType:"json"})}))};var ShopifyLogin=function(){const e="/account";var s=this;this.check_customer_count=0,this.preLogin=function(e,s){ssw("#ssw-customer-email").val(e),ssw("#ssw-customer-password").val(s)},this.setServiceUser=function(e,o){if("facebook"===o){var t=e;FB.api("/me",{fields:"id,email,first_name,gender,last_name,link,locale,name,timezone,updated_time,verified"},(function(e){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/setService",data:{user_id:t.authResponse.userID,access_token:t.authResponse.accessToken,user:e,service:o,_sid:ssw.cookie("hesid"),verify_token:ssw.cookie("ssw_verify_token"),accepts_marketing:!ssw.usercheckResponse.acceptMarketing||ssw("#ssw-accept-marketing-checkbox")[0].checked},success:function(o){if(service_id=o.service_id,0===o.user_id)hideLoginPopupLoader(),o.email?(ssw(".ssw-socialconnect").remove(),ssw("div.ssw-alert").remove(),ssw("#ssw-first_name").val(e.first_name).show(),ssw("#ssw-last_name").val(e.last_name).show(),ssw("#ssw-email").val(e.email),ssw("#login_modal").sswModal("hide"),ssw("#signup_modal").sswModal("show")):(ssw("#service_id").val(o.service_id),ssw(".ssw-modal").sswModal("hide"),ssw("#set-email-modal").sswModal());else if("enabled"!=o.state)if(o.password&&o.email){var t=new ShopifyLogin;t.preLogin(o.email,o.password),o.account_activation_token?t.login({customer_id:o.customer_id,token:o.account_activation_token,verified:o.verified,customer:{password:o.password,password_confirmation:o.password}}):t.login({verified:o.verified})}else targetSEMModal(o,"Facebook");else!o.password&&o.email?targetSEMModal(o):(s.preLogin(o.email,o.password),s.login())},dataType:"json"})}))}else if("gplus"===o){var a=ssw.extend(e.gplusData,{_sid:ssw.cookie("hesid"),hash_key:sswCookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")});e.response;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/glogin",data:a,success:function(e){sswSocialLogin=1,service_id=e.service_id,0===e.user_id?(hideLoginPopupLoader(),ssw(ssw(".socialconnect")[1]).prev().remove(),ssw(ssw(".socialconnect")[1]).next().remove(),ssw(ssw(".socialconnect")[1]).next().remove(),ssw(ssw(".socialconnect")[1]).remove(),ssw("div.ssw-alert").remove(),ssw("#ssw-first_name").val(a.first_name),ssw("#ssw-last_name").val(a.last_name),ssw("#ssw-email").val(a.email),ssw("#login_modal").sswModal("hide"),ssw("#signup_modal").sswModal("show")):"enabled"!=e.state?targetSEMModal(e,"Google"):e.password?(s.preLogin(e.email,e.password),s.login()):targetSEMModal(e,"Google")},dataType:"json"})}},this.prepareFormNode=function(e,s,o,t,a){var i=e[0];e.hide(),ssw(document.body).append(e),s&&-1!==s.indexOf("checkout.shopify.com")||e.attr("action",i.action.replace(location.protocol,a)+o);var n=ssw('<input type="hidden" name="checkout_url" />');for(var r in s&&n.val(s),e.append(n),t)if(t.hasOwnProperty(r)){var c=t[r],l=e.find('input[name="'+c.name+'"]');l.length&&(l.removeAttr("disabled"),l.val(c.value))}return i},this.getRecaptchaSiteKey=function(){return"undefined"!=typeof ___grecaptcha_cfg?Object.keys(___grecaptcha_cfg.auto_render_clients)[0]:null},this.getHcaptchaWidgetId=function(){return ssw("form[action*='account'] .h-captcha iframe:eq(0)").attr("data-hcaptcha-widget-id")},this.addRecaptchaTokenAndSubmitForm=function(e,o,t,a,i){const n=s.getRecaptchaSiteKey();window.grecaptcha.execute(n,{action:"customer_login"}).then((function(n){(e.find(`input[name="${RECAPTCHA_PARAM_KEY}"]`).length||e.append(`<input type="hidden" name="${RECAPTCHA_PARAM_KEY}" value="${n}"/>`),e[0])&&s.prepareFormNode(e,o,t,a,i).submit()}))},this.redirectAfterAuth=function(e,s,o,t=!1){var a=this;const i=a.getRecaptchaSiteKey();if(navigator.userAgent.indexOf("MSIE")>-1&&o)location.href=o;else{var n=(navigator.userAgent.indexOf("Chrome")>-1||-1===navigator.userAgent.indexOf("Safari"))&&-1===navigator.userAgent.indexOf("Firefox")&&"https:"===location.protocol,r=location.protocol;n&&(r="http:"===location.protocol?"https:":"http:");var c=e.clone();c.attr("id","ssw-test-login"),c.find("input").removeAttr("id").removeAttr("class"),ssw(document).trigger("sswafterlogin");var l="",d=getTmpFaves();if(d?.value.redirectUrl?(l=d.value.redirectUrl,localStorage.removeItem("ssw-tmp-faves")):l=o||(""===window.ssw.login_redirect_url?location.pathname.indexOf("/account/")?location.href:location.protocol+"//"+location.hostname:window.ssw.login_redirect_url),n||(l=l.replace("https:","http:")),l=gwGetUrlWithActiveLocale(l),t){var w="?checkout_url="+encodeURIComponent(l);if(i)window.grecaptcha&&"function"==typeof window.grecaptcha.execute?a.addRecaptchaTokenAndSubmitForm(c,l,w,s,r):Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}).then((function(){a.addRecaptchaTokenAndSubmitForm(c,l,w,s,r)}));else if(c[0])a.prepareFormNode(c,l,w,s,r).submit()}else location.href===l?location.reload():location.href=l}},this.customerIdPage=function(e,s,o,t,a){var i=this;i.check_customer_count++,ssw.ajax({url:sswProxyUrl+"/lite2/auth/customeridpage",type:"POST",data:e,success:function(n){ssw.cookie("ssw-userchecked",0,{expires:-1});var r=ssw("<div>");if(r.html(n),parseInt(r.find("#ssw-customer-id").html()))i.redirectAfterAuth(s,o,t);else if(a&&i.check_customer_count<5)setTimeout((function(){i.customerIdPage(e,s,o,t,a)}),1e3);else if(!a){if(sswSocialLogin?trackShopStats("invalid_social_login","all"):trackShopStats("invalid_email_login","all"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show"),sl)addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning");else{addMessage(ssw_message_selector,sswLangs.t("invalid_login_credentials"),"warning");var c=ssw("#ssw-customer-email").val();ssw.post(sswProxyUrl+"/lite2/auth/checkUserState",{email:c},(function(e){e&&(e.success?addMessage(ssw_message_selector,sswLangs.t("already_registered_and_sent_invite_message",{email:c}),"warning"):addMessage(ssw_message_selector,sswLangs.t("incorrect_credentials",[c]),"warning"))}),"json")}sl=0,ssw("#hesy-login-submit").removeAttr("disabled").attr("enabled","enabled")}},dataType:"html"})},this.multiPassLogin=function(){ssw.get(sswProxyUrl+"/lite2/auth/getMultipassToken",{_sid:ssw.cookie("hesid")},(function(e){e?ssw.get("/account/login/multipass/"+e,{},(function(e){if(ssw("<div>").html(e).find("#ssw_cid").val()){var s=sswGetParameterByName("checkout_url");s||(s=""===window.ssw.login_redirect_url?location.pathname.indexOf("/account/")?location.href:location.protocol+"//"+location.hostname:window.ssw.login_redirect_url),gwHasShopifyLocale()&&!gwHasLocaleInCurrentUrl()&&(s=s.indexOf(location.host)>-1?s.replace(location.host,location.host+"/"+Shopify.locale):"/"+Shopify.locale+s),location.href=s}else trackShopStats("invalid_social_login","all"),addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show")})).fail((function(){trackShopStats("invalid_social_login","all"),addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show")})):(trackShopStats("invalid_social_login","all"),addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show"))}))},this._login=function(e,s=null){var o=this;const{key:t,value:a}=s||{};var i=ssw("#he_customer_login"),n=i.serializeArray(),r={_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token"),service_id:service_id};for(var c in n)n.hasOwnProperty(c);void 0!==sswCookie("cart")&&(r.cart_token=sswCookie("cart"));var l=sswGetParameterByName("checkout_url");if(""!=l){var d=l.split("/");r.form_type="customer_login",r.utf8="%E2%9C%93",r.checkout_url=encodeURIComponent(l),r.cart=d[d.length-1],r["customer[email]"]=ssw("#ssw-customer-email").val(),r["customer[password]"]=ssw("#ssw-customer-password").val()}var w="/account/login",u=ssw("#ssw-customer-password").val(),p=ssw("#ssw-customer-email").val(),h=new URLSearchParams(w);if(n.forEach((e=>{h.append(e.name,e.value)})),t&&a&&h.append(t,a),Object.keys(r).forEach((e=>h.append(e,r[e]))),e&&e.customer_id&&e.token&&e.customer&&e.customer.password&&e.customer.password_confirmation&&(w="/account/activate/"+e.customer_id+"/"+e.token,h=e,""!=l&&(h.checkout_url=encodeURIComponent(l))),!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&""!=l&&-1!=l.indexOf("checkout.shopify.com")){var m=i.clone();m.attr("id","ssw-login-clone-form"),m.css("display","none"),m.append('<input type="hidden" name="checkout_url" value="'+l+'"/>'),t&&a&&m.append(`<input type="hidden" name="${t}" value="${a}"/>`),ssw(document.body).append(m),m.submit()}else fetch(w,{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},body:h}).then((e=>Promise.all([e.text(),e.url]))).then((([s,t])=>{var a=ssw("<div>").html(s).find("#ssw_cid").val();if(a&&0!==a&&"0"!==a){var c=new Date;r.customer_timezone_offset=-1*c.getTimezoneOffset()*60,r.customer={email:p,password:u},ssw.post(sswProxyUrl+"/lite2/auth/login",r,(function(e){e.error&&(sswSocialLogin?trackShopStats("invalid_social_login","all"):trackShopStats("invalid_email_login","all")),o.redirectAfterAuth(i,n,l)}))}else{if(t.includes("/challenge"))return void ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/encrypt",data:{password:u},success:function(e){void 0!==e.new_password&&e.new_password&&"undefined"!=typeof localStorage&&(localStorage.setItem("challenge_password",e.new_password),location.href="/challenge")},dataType:"json"}).fail((function(e){location.href="/challenge"}));if(sl||sswSocialLogin||e&&e.service){if(e&&e.verified&&(window.ssw.usercheckResponse.multipass_enabled,1)&&window.ssw.usercheckResponse.multipass_enabled)return void o.multiPassLogin();o.redirectAfterAuth(i,n,l,!0),hideLoginPopupLoader()}else trackShopStats("invalid_email_login","all"),ssw.post(sswProxyUrl+"/lite2/auth/checkUserState",{email:p},(function(e){e.success?addMessage(ssw_message_selector,sswLangs.t("already_registered_and_sent_invite_message",{email:p}),"warning"):addMessage(ssw_message_selector,sswLangs.t("incorrect_credentials",[p]),"warning")}),"json"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show")}})),-1!=navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&setTimeout((function(){o.customerIdPage(r,i,n,l,!0)}),1e3)},this.oldRecaptchaCallback=null,this.login=function(e){var s=this;const o=s.getRecaptchaSiteKey(),t=s.getHcaptchaWidgetId();hideLoginPopupLoader(),loginLoader(),t?hcaptcha.execute(t,{async:!0}).then((({response:o})=>{s._login(e,{key:HCAPTCHA_PARAM_KEY,value:o})})).catch((e=>{console.error(e)})):o?window.grecaptcha&&"function"==typeof window.grecaptcha.execute?window.grecaptcha.execute(o,{action:"customer_login"}).then((function(o){s._login(e,{key:RECAPTCHA_PARAM_KEY,value:o})})):(Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}).then((()=>{window.storefrontContactFormsRecaptchaCallback&&(s.oldRecaptchaCallback=window.storefrontContactFormsRecaptchaCallback,window.storefrontContactFormsRecaptchaCallback=function(){s.oldRecaptchaCallback(),document.dispatchEvent(new Event("gwRecaptchaLoaded"))})})),s._initGrecaptchaEventListener(e)):s._login(e)},this._initGrecaptchaEventListener=function(e){const s=this,o=s.getRecaptchaSiteKey(),t=function(){try{if(!window.grecaptcha||"function"!=typeof window.grecaptcha.execute)throw new Error("Failed to load grecaptcha!");window.grecaptcha.execute(o,{action:"customer_login"}).then((function(o){s._login(e,{key:RECAPTCHA_PARAM_KEY,value:o})}))}catch(e){console.error(e)}finally{document.removeEventListener("gwRecaptchaLoaded",t),s.oldRecaptchaCallback&&(window.storefrontContactFormsRecaptchaCallback=s.oldRecaptchaCallback,s.oldRecaptchaCallback=null)}};document.addEventListener("gwRecaptchaLoaded",t)},this._signUp=function(o=null){let t=new URLSearchParams(e);const{key:a,value:i}=o||{};var n=ssw("#he_create_customer"),r=n.find('input[type="password"]').val(),c=ssw("#he_customer_login"),l=n.serializeArray();const d={_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),service_id:service_id};var w=sswGetParameterByName("checkout_url");if(""!=w){var u=w.split("/");d.form_type="customer_login",d.utf8="%E2%9C%93",d.checkout_url=encodeURIComponent(w),d.cart=u[u.length-1]}l.forEach((e=>{t.append(e.name,e.value)})),Object.keys(d).forEach((e=>t.append(e,d[e]))),a&&i&&t.append(a,i),showLoginPopupLoader(),ssw("#hesy-sign-up-submit").removeAttr("enabled").attr("disabled","disabled"),ssw("#signup_modal .ssw-alert").remove(),fetch(e,{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},body:t}).then((e=>Promise.all([e.text(),e.url]))).then((([e,o])=>{var a=ssw("<div>").html(e),i=a.find(".errors li");0===i.length&&(i=a.find(".errors-list li")),0===i.length&&(i=a.find("#create_customer .note.form-error li")),0===i.length&&(i=a.find(".form__message+ul>li")),0===i.length&&(i=a.find("#create_customer [class*='error'] li")),i.length?(hideLoginPopupLoader(),ssw("#hesy-sign-up-submit").removeAttr("disabled").attr("enabled","enabled"),i.each((function(){addMessage("#signup_modal .login-failed",ssw(this).html(),"warning"),addMessage('form[action$="/account"]:not(#he_create_customer)',ssw(this).html(),"warning")}))):o.includes("/challenge")?ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/encrypt",data:{password:r},success:function(e){void 0!==e.new_password&&e.new_password&&"undefined"!=typeof localStorage&&(localStorage.setItem("challenge_password",e.new_password),location.href="/challenge")},dataType:"json"}).fail((function(e){location.href="/challenge"})):ssw.post(sswProxyUrl+"/lite2/auth/register",t.toString(),(function(e){ssw(document).trigger("sswOnCustomerSignedUp",e),""!=w?s.redirectAfterAuth(c,l,w):0===e.error?(ssw.cookie("ssw-userchecked",0,{expires:-1}),s.redirectAfterAuth(c,l)):ssw(".login-failed").empty()}),"json")})).catch((function(e){if(parseInt(e.status)>400){hideLoginPopupLoader();var o=ssw("<div>").html(e.responseText).find("div.content > div.content--block:nth-child(2) > div.content--desc").html();o=o||e.statusText,"Too many attempts: Please try again in 10 minutes"==ssw.trim(o)&&void 0!==sswLangs.data.too_many_attempts&&(o=sswLangs.data.too_many_attempts),addMessage("#signup_modal .login-failed",o,"warning"),addMessage('form[action$="/account"]:not(#he_create_customer)',o,"warning")}else ssw.ajax({url:sswProxyUrl+"/lite2/auth/customeridpage",success:function(e){ssw.cookie("ssw-userchecked",0,{expires:-1});var o=parseInt(ssw(e).text());o>0?(t.append("$customer_id",o),ssw.post(sswProxyUrl+"/lite2/auth/register",t.toString(),(function(e){""!=w?s.redirectAfterAuth(c,l,w):0===e.error?(ssw.cookie("ssw-userchecked",0,{expires:-1}),s.redirectAfterAuth(c,l)):ssw(".login-failed").empty()}),"json")):(hideLoginPopupLoader(),addMessage(sswLangs.t("email_is_already_associated")))},dataType:"html"})}))},this.signUp=function(){var e=this;const s=e.getRecaptchaSiteKey(),o=e.getHcaptchaWidgetId();hideLoginPopupLoader(),o?hcaptcha.execute(o,{async:!0}).then((({response:s})=>{e._signUp({key:HCAPTCHA_PARAM_KEY,value:s})})).catch((e=>{console.error(e)})):s?window.grecaptcha&&"function"==typeof window.grecaptcha.execute?window.grecaptcha.execute(s,{action:"customer_login"}).then((function(s){e._signUp({key:RECAPTCHA_PARAM_KEY,value:s})})):Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}).then((function(){window.grecaptcha.execute(s,{action:"customer_login"}).then((function(s){e._signUp({key:RECAPTCHA_PARAM_KEY,value:s})}))})):e._signUp()}};void 0!==sswApp.default&&sswApp.default&&sswRun((function(){ssw(document).ready((function(){ssw(document).on("submit",'form[action$="/account"],form[action$="/account/login"]',(function(){var e=this.querySelector('input[name="customer[email]"]'),s=this.querySelector('input[name="customer[password]"]');e&&s&&(e.setAttribute("type","email"),e.setAttribute("required","required"),s.setAttribute("required","required"),function(e){var s=e.querySelector('input[name="customer[email]"]'),o=e.querySelector('input[name="customer[password]"]'),t=s.value,a=o.value,i=btoa(t);if(i&&(ssw.cookie("ssw_verify_token",sswMd5(a+i),{expires:30,path:"/",secure:"https:"===location.protocol,samesite:"https:"===location.protocol?"None":void 0}),"he_customer_login"!==e.id&&"he_create_customer"!==e.id)){var n=btoa(btoa(btoa(a).split("").reverse().join("")).split("").reverse().join("")).split("").reverse().join("");localStorage.setItem(i,n)}}(this))}));var e=document.querySelector('form[action="/account/recover"]');if(e){var s=e.querySelector('input[name="email"]');s&&s.setAttribute("type","email"),e.addEventListener("submit",(function(s){e._passWasUnset||(s.preventDefault(),s.stopImmediatePropagation());var o=e.querySelector('input[name="email"]').value;o&&ssw.ajax({url:sswProxyUrl+"/lite2/auth/unsetpass",type:"POST",data:{email:o},dataType:"json",success:function(){e._passWasUnset=!0,e.submit()},error:function(){e._passWasUnset=!0,e.submit()}})}))}var o=document.querySelector('form[action$="/account/reset"]');if(o){var t=location.pathname.split("/account/reset/"),a=t.length>1&&t[1].split("/")[0];a&&o.addEventListener("submit",(function(e){var s=o.querySelector('input[name="customer[password]"]'),t=o.querySelector('input[name="customer[password_confirmation]"]'),i=!(!s.value||!t.value||s.value!==t.value)&&t.value;if(i){var n="function"==typeof window.btoa;ssw.ajax({url:sswProxyUrl+"/lite2/auth/resetpass",type:"POST",async:!1,data:{customer_id:a,new_token:n?window.btoa(i):i,encoded:n},dataType:"json"})}}))}}))})),window.addEventListener("sswoauthcallback",(function(e){if(e.detail)if("amazon"===e.detail.service)ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/azshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(e){if(void 0!==e.service_id&&(service_id=e.service_id),void 0!==e.password&&e.password&&(e.password=atob(e.password)),sswSocialLogin=1,ssw.isEmptyObject(e))hideLoginPopupLoader();else if(e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new)showAcceptTermsForm(e);else if("enabled"!=e.state){if(e.password&&e.email)(s=new ShopifyLogin).preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,verified:e.verified,customer:{password:e.password,password_confirmation:e.password}}):s.login({verified:e.verified});else targetSEMModal(e,"Amazon")}else{var s;if(!e.password&&e.email)targetSEMModal(e,"Amazon");else if(e.password)(s=new ShopifyLogin).preLogin(e.email,e.password),s.login({verified:e.verified});else if(window.ssw.usercheckResponse.multipass_enabled,window.ssw.usercheckResponse.multipass_enabled)(s=new ShopifyLogin).multiPassLogin();else addMessage(ssw_message_selector,"sswLangs.t('already_registered_to_social_service2', {email: response.email})","warning"),ssw("#login_modal").sswModal()}},dataType:"json"});else if("yahoo"===e.detail.service)ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/yshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(e){if(sswSocialLogin=1,void 0!==e.service_id&&(service_id=e.service_id),void 0!==e.password&&e.password&&(e.password=atob(e.password)),ssw.isEmptyObject(e))hideLoginPopupLoader();else if(e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new)showAcceptTermsForm(e);else if("enabled"!=e.state){if(e.password&&e.email)(s=new ShopifyLogin).preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,customer:{password:e.password,password_confirmation:e.password}}):s.login({verified:e.verified});else targetSEMModal(e,"Yahoo")}else{var s;if(!e.password&&e.email)targetSEMModal(e,"Yahoo");else if(e.password)(s=new ShopifyLogin).preLogin(e.email,e.password),s.login({verified:e.verified});else if(window.ssw.usercheckResponse.multipass_enabled,window.ssw.usercheckResponse.multipass_enabled)(s=new ShopifyLogin).multiPassLogin();else addMessage(ssw_message_selector,sswLangs.t("already_registered_to_social_service2",{email:e.email}),"warning"),ssw("#login_modal").sswModal()}},dataType:"json"});else if("line"===e.detail.service){var s=e.detail.service;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/lshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token"),service:s},success:function(e){var o;sswSocialLogin=1,void 0!==e.service_id&&(service_id=e.service_id),void 0!==e.password&&e.password&&(e.password=atob(e.password)),ssw.isEmptyObject(e)?hideLoginPopupLoader():e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new?showAcceptTermsForm(e):e.password?e.isOldCustomer?targetSEMModal(e,s):((o=new ShopifyLogin).preLogin(e.email,e.password),o.login({verified:e.verified})):void 0!==e.user_id&&e.user_id&&(window.ssw.usercheckResponse.multipass_enabled,1)&&window.ssw.usercheckResponse.multipass_enabled?(o=new ShopifyLogin).multiPassLogin():(hideLoginPopupLoader(),ssw("#service_id").val(e.service_id),ssw(".ssw-modal").sswModal("hide"),e.email?targetSEMModal(e,s):ssw("#set-email-modal").sswModal())},dataType:"json"})}})),sswLibraryLoaded((function(){window.sswHelperLoaded?validateLogin():window.addEventListener("sswhelperload",validateLogin),ssw(document).on("click",".ssw-azconnect",(function(){showLoginPopupLoader();var e=HE_DOMAIN+"/lite2/auth/azconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent("https://"+Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:e,windowOptions:sswGetPopupBounds(710,550),callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"amazon"},bubbles:!0,cancellable:!1})}})})),ssw(document).on("click",".ssw-yconnect",(function(){showLoginPopupLoader();var e=HE_DOMAIN+"/lite2/auth/yconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:e,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"yahoo"},bubbles:!0,cancellable:!1})}})})),ssw(document).on("click",".ssw-line-connect ",(function(){showLoginPopupLoader();var e=HE_DOMAIN+"/lite2/auth/lconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:e,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"line"},bubbles:!0,cancellable:!1})}})})),ssw(document).on("click",".ssw-twconnect",(function(){shopCallback4TTI("twconnect","twitter")})),ssw(document).on("click",".ssw-inconnect",(function(){shopCallback4TTI("inconnect","instagram")})),ssw(document).on("click",".ssw-tmconnect",(function(){shopCallback4TTI("tmconnect","tumblr")})),ssw(document).on("keyup change","#he_create_customer input",(function(){""!=ssw("#he_create_customer #ssw-email").val()&&""!=ssw("#he_create_customer #ssw-password").val()&&(ssw("#he_create_customer .ssw-first-name:hidden").length?ssw("#he_create_customer .ssw-first-name").slideDown():""!=ssw("#he_create_customer #ssw-first_name").val()&&ssw("#he_create_customer .ssw-last-name:hidden").length&&ssw("#he_create_customer .ssw-last-name").slideDown())})),ssw(document).on("shown.ssw.modal","#login_modal",(function(){ssw(document.body).hasClass("ssw-touch")||ssw("#ssw-customer-email").focus()})),ssw(document).on("show.ssw.modal","#login_modal",(function(){ssw(".ssw-modal:not(#login_modal)").sswModal("hide")})),ssw(document).on("shown.ssw.modal","#signup_modal",(function(){ssw(document.body).hasClass("ssw-touch")||ssw("#he_create_customer input").each((function(e,s){if(""===ssw(s).val())return ssw(s).focus(),!1}))}))})),sswUserChecked((function(){function e(){var e=ssw.usercheckResponse;e.termsSignup&&(ssw("#ssw-signup-accept-terms").show().find('input[type="checkbox"]').attr("required","required"),ssw(".ssw-accept-terms").show(),e.termsLink&&(ssw("#ssw-signup-accept-terms-marketing .terms-link").attr("href",e.termsLink).show(),ssw("#ssw-signup-accept-terms-marketing .terms-span").hide(),ssw(".ssw-accept-wrapper .terms-link").attr("href",e.termsLink).show(),ssw(".ssw-accept-wrapper .terms-span").hide()))}window.sswHelperLoaded?e():window.addEventListener("sswhelperload",e)}))}function gwLoginCritical(e){if("undefined"!=typeof sswJqLoaded&&sswJqLoaded){if(window.addEventListener("sswoauthcallback",(function(e){e.detail&&"facebook"===e.detail.service&&ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/fshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(e){if(void 0!==e.service_id&&(service_id=e.service_id),sswSocialLogin=1,void 0!==e.password&&e.password&&(e.password=atob(e.password)),ssw.isEmptyObject(e))hideLoginPopupLoader();else if(e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new)showAcceptTermsForm(e);else if("enabled"!=e.state){if(e.password&&e.email)(s=new ShopifyLogin).preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,customer:{password:e.password,password_confirmation:e.password}}):s.login();else targetSEMModal(e,"Facebook")}else{var s;if(!e.password&&e.email)targetSEMModal(e,"Facebook");else if(e.email)if(e.password)(s=new ShopifyLogin).preLogin(e.email,e.password),s.login();else addMessage("#login_modal .login-failed","sswLangs.t('already_registered_to_social_service2', {email: response.email})","warning"),ssw("#login_modal").sswModal();else hideLoginPopupLoader(),ssw("#service_id").val(e.service_id),ssw(".ssw-modal").sswModal("hide"),ssw("#set-email-modal").sswModal()}},dataType:"json"})})),1===e.ourFacebookApp)ssw(document).on("click",".ssw-fbconnect",(function(){showLoginPopupLoader();var e=HE_DOMAIN+"/lite2/auth/fconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:e,windowOptions:window.screen.width>650?"width=650,height=500":null,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"facebook"},bubbles:!0,cancellable:!1})}})}));else{var s=setInterval((function(){window.FB&&FB.getLoginStatus&&(clearInterval(s),console.info("FB JS SDK is loaded"),setTimeout((function(){FB.getLoginStatus((function(e){window.sswFbLoginStatusResponse=e}),1)}),300))}),100);ssw(document).on("click",".ssw-fbconnect",(function(){showLoginPopupLoader(),clearInterval(window.ssw_fb_login_status_interv),window.ssw_fb_login_status_interv=setInterval((function(){if(window.sswFbLoginStatusResponse){clearInterval(window.ssw_fb_login_status_interv);var e=window.sswFbLoginStatusResponse;"connected"===e.status?serviceUserChecker(e,"facebook"):(e.status,FB.login((function(e){e.authResponse?serviceUserChecker(e,"facebook"):hideLoginPopupLoader()}),{scope:"email"},1))}}),100)}))}window.addEventListener("sswoauthcallback",(function(e){e.detail&&"gplus"===e.detail.service&&ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/gcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(e){if(sswSocialLogin=1,void 0!==e.service_id&&(service_id=e.service_id),void 0!==e.password&&e.password&&(e.password=atob(e.password)),ssw.isEmptyObject(e)||"object"==typeof e&&0===e.length)hideLoginPopupLoader();else if(e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new)showAcceptTermsForm(e);else if("enabled"!=e.state){if(e.password&&e.email)(s=new ShopifyLogin).preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,verified:e.verified,service:"gplus",customer:{password:e.password,password_confirmation:e.password}}):s.login({verified:e.verified,service:"gplus"});else targetSEMModal(e,"Google")}else{var s;if(!e.password&&e.email)targetSEMModal(e,"Google");else if(e.password)(s=new ShopifyLogin).preLogin(e.email,e.password),s.login({verified:e.verified,service:"gplus"});else addMessage("#login_modal .login-failed","sswLangs.t('already_registered_to_social_service2', {email: response.email})","warning"),ssw("#login_modal").sswModal()}},dataType:"json"})}));var o={},t=!1;1===e.ourGoogleApp?ssw(document).on("click",".ssw-gconnect",(function(){if(showLoginPopupLoader(),!t){t=!0;var e=HE_DOMAIN+"/lite2/auth/gconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:HE_DOMAIN+"/lite2/auth/gconnect?_sid="+ssw.cookie("hesid")+"&shop="+Shopify.shop,windowOptions:window.screen.width>470?"width=400,height=550":null,callback:function(){t=!1,sswDispatchEvent("sswoauthcallback",{detail:{service:"gplus"},bubbles:!0,cancellable:!1})}})}})):(window.gwGapiLoad=function(){gapi.load("auth2",(function(){var e=setInterval((function(){if(document.querySelector(".ssw-gconnect")){clearInterval(e);var s=gapi.auth2.init({cookiepolicy:"single_host_origin"}),t=document.querySelectorAll(".ssw-gconnect"),a=t.length,i=function(e){if(hideLoginPopupLoader(),e&&e.isSignedIn()){o={access_token:e.getAuthResponse().access_token},profile=e.getBasicProfile();var s={first_name:profile.getGivenName(),last_name:profile.getFamilyName(),about:profile.aboutMe,image:profile.getImageUrl(),url:"",email:profile.getEmail(),user_id:profile.getId(),service:"gplus"};o=ssw.extend(o,s),ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/service",data:{user_id:o.user_id,email:o.email,service:"gplus",access_token:o.access_token,_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key")},success:function(e){var s=new ShopifyLogin;void 0!==e.service_id&&(service_id=e.service_id),e.status?"enabled"===e.state&&e.password?(s.preLogin(e.email,e.password),s.login({verified:e.verified,service:"gplus"})):"enabled"!=e.state&&e.password&&e.email?(s.preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,verified:e.verified,service:"gplus",customer:{password:e.password,password_confirmation:e.password}}):s.login({verified:e.verified,service:"gplus"})):targetSEMModal(e,"Google"):e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new?showAcceptTermsForm(e,"gplus",{gplusData:o,json:e}):s.setServiceUser({gplusData:o,json:e},"gplus")},dataType:"json"})}else hideLoginPopupLoader()},n=function(e){hideLoginPopupLoader()};for(let e=0;e<a;e++){var r=t[e];s.attachClickHandler(r,{},i,n)}}}),500)}))},window.gapi&&window.gwGapiLoad())}sswLibraryLoaded((function(){var e=sswIsOauthRedirectFrom();e&&(location.hash="",sswDispatchEvent("sswoauthcallback",{detail:{service:e},bubbles:!0,cancellable:!1}))}));let a=function(e){showLoginPopupLoader();let s=Ssw.gwAssetsManifestLoader;Promise.all([s.requireByKey("login.main.css","STYLE"),s.requireByKey("login.main.js","SCRIPT"),s.requireByKey("core.library.js","SCRIPT")]).then((function(){hideLoginPopupLoader()})),ssw(document.body).off("show.ssw.modal","#login_modal,#signup_modal",a)};ssw(document.body).on("show.ssw.modal","#login_modal,#signup_modal",a)}"undefined"==typeof Ssw&&(Ssw={}),Ssw.Login={options:{autoIntegrateLinks:!0,autoIntegrateIcons:!0},init:function(e){"object"==typeof e&&(this.options=e),this.changeAuthFormsActions(),this.showForm(),this.bindEvents(),"function"==typeof Ssw.gwAssetsLoader.require&&ssw(".ssw-socialconnect.social_networks_icon_for_dropdown").click((function(){Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}),ssw(".ssw-socialconnect.social_networks_icon_for_dropdown").unbind("click")}))},bindEvents:function(){var e=this;ssw(window).ready((function(){e.options.autoIntegrateLinks&&e.autoIntegrateLinks(),e.options.autoIntegrateIcons&&e.autoIntegrateIcons(),ssw(document.body).on("click",".customer_login_link",(function(){return ssw("#login_modal").sswModal(),trackShopStats("login_popup_view","all"),!1}))})),void 0===sswApp.customer&&e.dropdownLoginForm()},showForm:function(){if("undefined"!=typeof sswAutoShowLogin&&sswAutoShowLogin&&"/pages/share-review"!=location.pathname&&!ssw(".fancybox-overlay:visible").length){var e=+new Date,s=parseInt(ssw.cookie("sswautoshow_login"));if(isNaN(s)||e-s>864e5){var o="undefined"!=typeof sswAutoShowDelay?1e3*sswAutoShowDelay:5e3;setTimeout((function(){ssw("#signup_modal:visible").length||ssw("#login_modal:visible").length||("function"==typeof sswCustomShowLoginFunction?sswCustomShowLoginFunction():ssw("#signup_modal").sswModal("show")),ssw.cookie("sswautoshow_login",+new Date,{path:"/",secure:"https:"===location.protocol,samesite:Shopify.designMode?"None":"Lax"})}),o)}}},autoIntegrateLinks:function(){var e=ssw('a[href="/account/login"]');e&&e.length>0&&e.attr({"data-target":"#login_modal","data-toggle":"ssw-modal",href:"javascript://"});var s=ssw('a[href="/account/register"]');s&&s.length>0&&s.attr({"data-target":"#signup_modal","data-toggle":"ssw-modal",href:"javascript://"});var o=setInterval((function(){var e=ssw('a[href="/account"]:visible'),s=ssw("#ssw-topauth");e&&e.length>0&&e.parent()&&"customer_myorders_li"!=e.parent().attr("id")&&s&&s.length>0&&0!=s.children().length&&(clearInterval(o),e.hide().after(s.clone()))}),100)},validateSignUpForm:function(e){var s=e.find(".ssw-accept-terms__input")[0].checked,o=e.find(".ssw-accept-wrapper"),t=ssw.usercheckResponse.termsSignup;if(!s&&t)return o.addClass("ssw-error-accept-terms"),!1},autoIntegrateIcons:function(){sswAddEventListener("sswhelperload",(function(){if((location.pathname.toLowerCase().includes(loginPath)||location.pathname.toLowerCase().includes(registerPath))&&!ssw("*:not(#ssw-login-social-icons-widget-wrapper) > .ssw-social-login-widget").length){var e,s,o=ssw('form[action$="/account/login"]:not(#he_customer_login, #customer_login_guest, .ssw-auth-dropdown form, .hiddenFormRecaptcha)'),t=ssw('form[action$="/account"]:not(#he_create_customer)'),a=ssw("#ssw-login-social-icons-widget-wrapper").find(".ssw-social-login-widget"),i=ssw("#ssw-login-social-icons-widget-wrapper").find(".ssw-accept-wrapper"),n=ssw('form[action$="/account"]:not(#he_create_customer) input[name="customer[accepts_marketing]"]');if(i.show(),"function"==typeof sswCustomAutoIntegrateIcons)sswCustomAutoIntegrateIcons(a);else if(o.length?e=o:t.length&&n.length?(e=t.find('input[name="customer[first_name]"]'),s=t.children().last(),ssw("#ssw-login-social-icons-widget-wrapper").find(".ssw-accept-marketing").remove()):t.length&&(e=t,s=t.children().last()),e&&e.length){var r,c=e.attr("id");if(c&&(r=ssw('label[for="'+c+'"]')).length&&(e=r),!r||!r.length){var l=e.parents().has("customer[first_name]"==e.attr("name")?t.find('input[name="customer[password]"]'):o.find('input[name="customer[password]"]')).first().children().has(e).first();l.length&&(e=l)}a.insertBefore(e),i.insertBefore(s),t.length&&t.submit((function(){return Ssw.Login.validateSignUpForm(t)}))}}}))},changeAuthFormsActions:function(){var e=ssw("#he_customer_login"),s=ssw("#he_create_customer"),o=e.attr("action"),t=s.attr("action");let a=Shopify.locale?.toLowerCase(),i=o?.startsWith("/"),n=o?.toLowerCase().includes(a+"/");o&&-1===o.indexOf(location.hostname)&&(gwHasShopifyLocale()&&(!i&&n?o=`/${o}`:i&&!n?o=`/${a}${o}`:i||n||(o=`/${a}/${o}`)),e.attr("action",["https://",location.hostname,o].join(""))),t&&-1===t.indexOf(location.hostname)&&(gwHasShopifyLocale()&&(!i&&n?t=`/${t}`:i&&!n?t=`/${a}${t}`:i||n||(t=`/${a}/${t}`)),s.attr("action",["https://",location.hostname,t].join("")))},resetAcceptTermsForm:function(){ssw("#ssw-accept-terms-checkbox").checked(!0),ssw("#ssw-accept-marketing-checkbox").checked(!0),ssw("#terms-email-input").val(""),ssw(".terms-email-group").show(),ssw(".accept_terms-group").show(),ssw(".accepts_marketing-group").show(),ssw("#ssw-cancel-account-button").hide(),ssw("#ssw-create-account-button").show()},setDropdownPosition:function(){ssw(".ssw-auth-dropdown").is(":visible")&&ssw(".ssw-auth-dropdown .ssw-dropdown-toggle").length&&(ssw(".ssw-auth-dropdown .ssw-dropdown-toggle").offset().left>ssw(window).width()/2?ssw(".ssw-auth-dropdown .ssw-dropdown-menu").hasClass("ssw-pull-right")||ssw(".ssw-auth-dropdown .ssw-dropdown-menu").addClass("ssw-pull-right"):ssw(".ssw-auth-dropdown .ssw-dropdown-menu").removeClass("ssw-pull-right"))},isElementInView:function(e,s){var o=ssw(window).scrollTop(),t=o+ssw(window).height(),a=e.offset().top,i=a+e.outerHeight();return!0===s?o<a&&t>i:a<=t&&i>=o},dropdownLoginForm:function(){var e=this;ssw(document.body).on("show.ssw.dropdown","span.ssw-dropdown",(function(e){ssw(window).width()<500&&(e.preventDefault(),ssw("#login_modal").sswModal("show"))})),ssw(document.body).on("show.ssw.modal","#login_modal",(function(s){ssw(window).width()<500||ssw(".ssw-auth-dropdown").is(":visible")&&!ssw("#ssw-community-box").is(":visible")&&(s.preventDefault(),setTimeout((function(){ssw(".ssw-auth-dropdown .ssw-auth-dropdown-message").html(ssw("#login_modal .login-failed").html()),ssw(".ssw-auth-dropdown .ssw-dropdown").hasClass("ssw-open")||(ssw(".ssw-auth-dropdown .ssw-dropdown").addClass("ssw-open"),Ssw.RewardPopup&&Ssw.RewardPopup.hidePopup&&Ssw.RewardPopup.hidePopup()),e.isElementInView(ssw(".ssw-auth-dropdown .ssw-dropdown-menu"),!0)||ssw(window).scrollTop(ssw(".ssw-auth-dropdown .ssw-dropdown-toggle").offset().top-20)}),100))})),e.setDropdownPosition(),ssw(window).resize((function(){e.setDropdownPosition()})),ssw(window).bind("orientationchange",(function(){e.setDropdownPosition()})),ssw(document.body).on("submit",'form[action="/account/login"]',(function(){ssw(this).closest(".ssw-auth-dropdown").length?localStorage.setItem("ssw_before_submit_login_url",location.href):localStorage.removeItem("ssw_before_submit_login_url")})),sswUserChecked((function(){!function(){if(null!=localStorage.getItem("ssw_before_submit_login_url")&&"/account"===location.pathname){var e=localStorage.getItem("ssw_before_submit_login_url");localStorage.removeItem("ssw_before_submit_login_url"),window.ssw.login_redirect_url?location.href=window.ssw.login_redirect_url:location.href=e}}()}))}},sswRun((function(e){Ssw.Login.init({autoIntegrateLinks:"undefined"!=typeof sswAutoIntegrate&&sswAutoIntegrate,autoIntegrateIcons:!0})}));